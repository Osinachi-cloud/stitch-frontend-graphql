<div class="text-[48px] text-center font-[700] p-[2rem] mt-[3rem] text-[#000]">Shopping Cart</div>

<div *ngIf="!isLoading; else elseBlock" class=" h-fit md:p-[6rem] p-[2rem]">
    <div class="grid md:grid-cols-3 grid-cols-1 gap-[4rem]">
        <div class="col-span-2 relative overflow-x-auto sm:rounded-lg border-t">

            <table class="w-full text-[14px] leading-[150%]  text-[#4B5563] text-left">
                <thead class="text-[14px] italic font-[100]  text-[#374151] uppercase">
                    <tr class="border-b">
                        <th scope="col" class="p-[2rem]">
                            PRODUCT
                        </th>
                        <th scope="col" class="p-[2rem]">
                            PRICE
                        </th>
                        <th scope="col" class="p-[2rem]">
                            QUANTITY
                        </th>
                        <th scope="col" class="p-[2rem]">
                            TOTAL
                        </th>
                        <th scope="col" class="p-[2rem]">
                            ACTION
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of cart" class="p-[2rem] hover:bg-[#fff]">
                        <td scope="row" class="p-[2rem] px-[2rem] font-medium text-gray-900 whitespace-nowrap">
                            <div class="flex gap-[2rem]">
                                <div class="w-[100px]">

                                    <img [src]="'data:image/png;base64,' + product.productImage" alt="product image">
                                </div>
                                <div class="flex justify-center items-center">
                                    <p>{{product.name}}</p>
                                </div>
                            </div>

                        </td>
                        <td class="px-[2rem]">
                            <div class="flex items-center gap-[1rem]">
                                <div>
                                    {{product.amount}}
                                </div>
                            </div>
                        </td>
                        <td class="px-[2rem]">
                            <div class="border border-[#cfcece] bg-[#fff] flex justify-around gap-[1rem]">
                                <div (click)="removeCount(product.productId)"
                                    class="text-[16px] p-[0.5rem] cursor-pointer flex justify-center items-center"><img
                                        src="/assets/icons/remove.png" alt=""></div>
                                <div class="text-[16px] p-[0.5rem] text-[grey]">{{product.quantity}}</div>
                                <div (click)="addCount(product.productId)"
                                    class="text-[16px] p-[0.5rem] cursor-pointer flex justify-center items-center"><img
                                        src="/assets/icons/add.png" alt=""></div>
                            </div>
                        </td>
                        <td class="px-[2rem]">
                            <!-- {{product.amount * count}} -->
                            {{product.amountByQuantity}}
                        </td>

                        <td class="px-[1rem]">
                            <div class="flex justify-around gap-[1rem]">
                                <div (click)="addProductLikes(product.productId)"
                                    class="text-[16px] p-[0.5rem] cursor-pointer"><img src="/assets/icons/Like.png"
                                        alt=""></div>
                                <div (click)="removeProduct(product.productId)"
                                    class="text-[16px] p-[0.5rem] cursor-pointer"><img src="/assets/icons/Close.png"
                                        alt=""></div>
                            </div>
                        </td>

                    </tr>
                </tbody>
            </table>
            <div class="border-t p-[2rem] mt-[2rem] flex justify-between">
                <div (click)="backToShopping()"
                    class="bg-[#F0F2F2] p-[1rem] border border-[lightgrey] text-[#82848B] uppercase font-[500] cursor-pointer">
                    continue shopping</div>
                <div (click)=" clearCart()"
                    class="bg-[#F0F2F2] p-[1rem] border border-[lightgrey] text-[#82848B] uppercase font-[500] cursor-pointer">
                    clear shopping cart</div>

            </div>
        </div>

        <div *ngIf="cart.length > 0" class="col-span-1 grid gap-[2rem]">
            <div class="border border-[lightgrey] p-[2rem] grid gap-[2rem] bg-[#EAEBF4]">
                <p class="text-[26px] font-[600] ">Apply Discount Code</p>
                <div>
                    <input class="w-[100%] p-[1rem] border-[lightgrey] outline-none" type="text"
                        placeholder="Enter discount code">
                </div>

                <div>
                    <p class="text-[20px] font-[600] ">Estimate Shipping and Tax</p>
                    <p class="text-[12px] text-[grey]">Enter your destination to get a shipping estimate.</p>
                </div>



                <div class="grid gap-[2rem]">
                    <div class="flex">
                        <div class="w-[35%] flex gap-[1rem]">
                            <label for="">Country</label> <span class="text-[red] ml-[1rem]">*</span>

                        </div>
                        <div class="w-[65%] bg-[#fff] border border-grey py-[0.8rem]">
                            <select class="w-full outline-none " name="" id="">
                                <option value="">Nigeria</option>
                                <option value="">Ghana</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex">
                        <div class="w-[35%] flex gap-[1rem]">
                            <label for="">Country</label> <span class="text-[red] ml-[1rem]">*</span>

                        </div>
                        <div class="w-[65%] bg-[#fff] border border-grey py-[0.8rem]">
                            <select class="w-full outline-none " name="" id="">
                                <option value="">Nigeria</option>
                                <option value="">Ghana</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex">
                        <div class="w-[35%] flex gap-[1rem]">
                            <label for="">Country</label> <span class="text-[red] ml-[1rem]">*</span>

                        </div>
                        <div class="w-[65%] bg-[#fff] border border-grey py-[0.8rem]">
                            <select class="w-full outline-none " name="" id="">
                                <option value="">Nigeria</option>
                                <option value="">Ghana</option>
                            </select>
                        </div>
                    </div>
                </div>

            </div>


            <div class="border border-[lightgrey] grid gap-[2rem] bg-[#EAEBF4]">

                <div class="grid gap-[1rem] p-[2rem] pb-[0rem]">
                    <div class="flex justify-between text-[18px] font-[600]">
                        <p>Subtotal</p>
                        <p>{{sumCartAmount}}</p>
                    </div>

                    <div class="flex justify-between text-[grey]">
                        <p>Tax</p>
                        <p>0.00</p>
                    </div>

                    <div class="flex justify-between text-[18px] font-[600]">
                        <p>Order Total</p>
                        <p>{{sumCartAmount}}</p>
                    </div>
                    <form class="w-full flex gap-[3rem]">
                        <div class="flex gap-[0.5rem] items-center">
                          <input type="radio" id="card" name="channel" value="card" [(ngModel)]="selectedChannel">
                          <label for="card">CARD</label>
                        </div>
                        <div class="flex gap-[0.5rem] items-center">
                          <input type="radio" id="ussd" name="channel" value="ussd" [(ngModel)]="selectedChannel">
                          <label for="ussd">USSD</label>
                        </div>
                        <div class="flex gap-[0.5rem] items-center">
                          <input type="radio" id="transfer" name="channel" value="transfer" [(ngModel)]="selectedChannel">
                          <label for="transfer">Transfer</label>
                        </div>
                      </form>
                      
                      <!-- <p>Selected Channel: {{ selectedChannel }}</p> -->
                    <div class="border-t-[lightgrey] border pt-[1rem] text-center text-[#82848B] text-[10px] uppercase">
                        Check Out with a different Address
                    </div>
                </div>

                <button [disabled]="isLoadingOrder" (click)="goToOrderPage()" class="flex justify-center gap-6 bg-[#000] p-[1rem] text-[#fff]">
                    <span>Proceed to checkout</span>
                    <span *ngIf="isLoadingOrder" class="spinner"></span>
                </button>


         

            </div>

        </div>
    </div>
</div>
<ng-template #elseBlock>
    <app-cart-loader></app-cart-loader>
</ng-template> 